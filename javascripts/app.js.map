{"version":3,"file":"public/javascripts/app.js","sources":["app/coffee_modules/scrollSpy.coffee","app/initialize.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAAA;AACE,iCAAU,KAAV;;AAAA,sBACA,kBACE;AAAA,SAAK,CAAL;AAAA,IACA,MAAM,CADN;AAAA,IAEA,QAAQ,CAFR;GAFF;;AAAA,sBAKA,eACE;AAAA,SAAK,CAAL;AAAA,IACA,MAAM,CADN;AAAA,IAEA,QAAQ,CAFR;GANF;;AAAA,sBASA,WAAU,EATV;;AAAA,sBAUA,MAAK,IAVL;;AAAA,sBAWA,iBAAgB,EAXhB;;AAAA,sBAYA,cAAa,EAZb;;AAAA,sBAaA,YAAW,IAbX;;AAAA,sBAcA,UAAS,IAdT;;AAgBa,qBAAC,QAAD;AACX,eAAW;aAAA;AACT,aAAC,iBAAD,CAAkB,QAAlB;eACA,KAAC,cAAD,GAFS;MAAA;IAAA,QAAX,EAGE,GAHF,EADW;EAAA,CAhBb;;AAAA,sBAqBA,mBAAkB,SAAC,QAAD;AAChB;AAAA,YAAQ,IAAR;AAAA,IACA,QAAQ,CAAC,IAAT,CAAc,SAAC,GAAD,EAAM,CAAN;aACZ,KAAK,CAAC,QAAS,KAAf,GACE;AAAA,YAAI,EAAE,IAAF,CAAI,CAAC,IAAL,CAAU,IAAV,CAAJ;AAAA,QACA,QAAQ,EAAE,IAAF,CAAI,CAAC,MAAL,EADR;AAAA,QAEA,QAAQ,EAAE,IAAF,CAAI,CAAC,WAAL,CAAiB,IAAjB,CAFR;AAAA,QAGA,MAAQ,EAAE,IAAF,CAHR;QAFU;IAAA,CAAd,CADA;WAOA,OAAO,CAAC,GAAR,CAAY,IAAC,SAAb,EARgB;EAAA,CArBlB;;AAAA,sBA+BA,gBAAe;AACb,QAAC,aAAD,GAA0B,EAAE,IAAC,gBAAH,CAAmB,CAAC,KAApB,EAA1B;AAAA,IACA,IAAC,gBAAe,CAAC,GAAjB,GAA0B,EAAE,MAAF,CAAS,CAAC,SAAV,EAD1B;AAAA,IAEA,IAAC,gBAAe,CAAC,IAAjB,GAA0B,EAAE,MAAF,CAAS,CAAC,SAAV,KAAwB,EAAE,MAAF,CAAS,CAAC,WAAV,CAAsB,IAAtB,IAA8B,CAFhF;AAAA,IAGA,IAAC,gBAAe,CAAC,MAAjB,GAA0B,EAAE,MAAF,CAAS,CAAC,SAAV,KAAwB,EAAE,MAAF,CAAS,CAAC,WAAV,CAAsB,IAAtB,CAHlD;AAAA,IAKA,IAAC,UAAD,GAAgB,IAAC,gBAAe,CAAC,GAAjB,GAAuB,IAAC,aAAY,CAAC,GAAxC,GAAiD,MAAjD,GAA6D,IAL1E;WAMA,IAAC,kBAAD,GAPa;EAAA,CA/Bf;;AAAA,sBAwCA,oBAAmB;AACjB;AAAA,QAAC,YAAD,GAAe,EAAE,IAAC,eAAH,CAAkB,CAAC,KAAnB,EAAf;AAAA,IACA,MAAM,CADN;AAEA;AAAA;yBAAA;AACE,UAAG,IAAC,gBAAe,CAAC,GAAjB,IAAwB,IAAC,SAAS,KAAI,CAAC,MAAM,CAAC,GAAjD;AACE,YAAG,oCAAsB,IAAC,gBAAe,CAAC,IAAjB,IAAyB,IAAC,SAAS,OAAI,CAAJ,CAAM,CAAC,MAAM,CAAC,GAA1E;AACE,cAAC,eAAD,GAAkB,IAAC,SAAS,KAA5B,CADF;SAAA;AAGE,cAAC,eAAD,GAAkB,IAAC,SAAS,OAAI,CAAJ,CAA5B,CAHF;SADF;OAAA;AAAA,MAKA,KALA,CADF;AAAA,KAFA;WASA,IAAC,YAAD,GAViB;EAAA,CAxCnB;;AAAA,sBAoDA,cAAa;AACX;AAAA,QAAG,IAAC,IAAD,KAAU,IAAb;AACE,aAAO,CAAC,GAAR,CAAY,yBAAZ,EADF;KAAA;AAEA,QAAG,IAAC,eAAc,CAAC,EAAhB,KAAwB,IAAC,YAAW,CAAC,EAArC,IAA4C,IAAC,QAAD,KAAc,IAA7D;AACE;AAAA;WAAA;4BAAA;AACE,YAAG,OAAM,IAAC,eAAc,CAAC,EAAtB,IAA4B,OAAM,KAArC;wBAAgD,SAAS,IAAC,eAAc,CAAC,IAAzB,GAAhD;SAAA;gCAAA;SADF;AAAA;sBADF;KAHW;EAAA,CApDb;;AAAA,sBA2DA,YAAW,SAAC,EAAD,EAAI,QAAJ;AACT,QAAG,IAAC,QAAD,KAAY,IAAf;AAAyB,UAAC,QAAD,GAAW,EAAX,CAAzB;KAAA;WACA,IAAC,QAAQ,MAAG,EAAH,CAAT,GAAoB,SAFX;EAAA,CA3DX;;AAAA,sBA+DA,oBAAmB;AACjB,QAAC,SAAD,GAAY,IAAZ;WACA,QAAQ,CAAC,YAAT,GAAwB,SAAC,CAAD;aACtB,CAAC,CAAC,cAAF,GADsB;IAAA,EAFP;EAAA,CA/DnB;;AAAA,sBAoEA,mBAAkB;AAChB,QAAC,SAAD,GAAY,KAAZ;WACA,QAAQ,CAAC,YAAT,GAAwB,SAAC,CAAD,KAFR;EAAA,CApElB;;mBAAA;;IADF;;AAAA,CAyEC,CAAC,EAAE,CAAC,SAAL,GAAiB,SAAC,GAAD;AACf;;IADgB,MAAM;GACtB;AAAA,cAAgB,cAAU,EAAE,IAAF,CAAV,CAAhB;AAAA,EACA,EAAE,MAAF,CAAS,CAAC,MAAV,CAAiB;WACf,SAAS,CAAC,aAAV,GADe;EAAA,CAAjB,CADA;AAGA,SAAO,SAAP,CAJe;AAAA,CAzEjB;;;;ACAA,QAAQ,4BAAR;;AAAA,CAEA,CAAE,QAAF,CAAW,CAAC,KAAZ,CAAkB;AAEhB;AAAA,IAAE,MAAF,CAAS,CAAC,EAAV,CAAa,OAAb,EAAqB,gBAArB,EAAsC,SAAC,CAAD;AACpC;AAAA,KAAC,CAAC,cAAF;AAAA,IACA,UAAU,EAAE,IAAF,CADV;AAAA,IAEA,SAAU,EAAE,OAAO,CAAC,IAAR,CAAa,iBAAb,CAAF,CAFV;AAGA,QAAG,OAAO,CAAC,QAAR,CAAiB,QAAjB,CAAH;AACE,aAAO,CAAC,WAAR,CAAoB,QAApB;aACA,MAAM,CAAC,WAAP,CAAmB,QAAnB,EAFF;KAAA;AAIE,aAAO,CAAC,QAAR,CAAiB,QAAjB;aACA,MAAM,CAAC,QAAP,CAAgB,QAAhB,EALF;KAJoC;EAAA,CAAtC;AAAA,EAYA,iBAAiB,SAAC,MAAD;AACf;AAAA,aAAS,EAAE,MAAF,CAAS,CAAC,IAAV,CAAe,aAAf,CAAT;AAAA,IACA,eAAe,MAAM,CAAC,MADtB;WAGA,MAAM,CAAC,IAAP,CAAY,SAAC,GAAD,EAAK,GAAL;AACV;AAAA,eAAS,IAAI,GAAb;AAAA,MACA,EAAE,IAAF,CAAI,CAAC,GAAL,CAAS,mBAAT,EAA+B,kBAAe,MAAf,GAAsB,MAAtB,GAA4B,MAA5B,GAAmC,OAAlE,CADA;AAAA,MAEA,EAAE,IAAF,CAAI,CAAC,GAAL,CAAS,gBAAT,EAA4B,kBAAe,MAAf,GAAsB,MAAtB,GAA4B,MAA5B,GAAmC,OAA/D,CAFA;AAAA,MAGA,EAAE,IAAF,CAAI,CAAC,GAAL,CAAS,cAAT,EAA0B,kBAAe,MAAf,GAAsB,MAAtB,GAA4B,MAA5B,GAAmC,OAA7D,CAHA;AAAA,MAIA,EAAE,IAAF,CAAI,CAAC,GAAL,CAAS,WAAT,EAAuB,kBAAe,MAAf,GAAsB,MAAtB,GAA4B,MAA5B,GAAmC,OAA1D,CAJA;AAAA,MAKA,EAAE,IAAF,CAAI,CAAC,GAAL,CAAS,SAAT,EAAoB,OAApB,CALA;AAAA,MAMA,EAAE,IAAF,CAAI,CAAC,WAAL,CAAiB,QAAjB,CANA;AAOA,YAA+B,CAAC,MAAI,CAAL,MAAW,YAAZ,CAA9B;eAAA,EAAE,IAAF,CAAI,CAAC,QAAL,CAAc,QAAd;OARU;IAAA,CAAZ,EAJe;EAAA,CAZjB;AAAA,EA2BA,EAAE,cAAF,CAAiB,CAAC,IAAlB,CAAuB;WACrB,eAAe,IAAf,EADqB;EAAA,CAAvB,CA3BA;AAAA,EA8BA,EAAE,MAAF,CAAS,CAAC,EAAV,CAAa,OAAb,EAAqB,cAArB,EAAoC,SAAC,CAAD;AAClC;AAAA,KAAC,CAAC,cAAF;AAAA,IACA,eAAe,EAAE,IAAF,CAAI,CAAC,IAAL,CAAU,oBAAV,CADf;AAAA,IAEA,aAAe,YAAY,CAAC,IAAb,EAFf;AAAA,IAGA,OAAO,CAAC,GAAR,CAAY,UAAZ,CAHA;AAIA,QAAG,UAAU,CAAC,MAAX,GAAoB,CAAvB;AACE,kBAAY,CAAC,WAAb,CAAyB,QAAzB;AAAA,MACA,YAAY,CAAC,GAAb,CAAiB,SAAjB,EAA2B,MAA3B,CADA;aAEA,UAAU,CAAC,QAAX,CAAoB,QAApB,EAHF;KAAA;aAKE,eAAe,IAAf,EALF;KALkC;EAAA,CAApC,CA9BA;AAAA,EA2CA,EAAE,cAAF,CAAiB,CAAC,SAAlB,EAA6B,CAAC,SAA9B,CAAwC,KAAxC,EAA8C,SAAC,IAAD;AAC5C,MAAE,YAAF,CAAe,CAAC,WAAhB,CAA4B,QAA5B;WACA,EAAG,qCAAiC,CAAC,IAAI,CAAC,IAAL,CAAU,IAAV,CAAD,CAAjC,GAAkD,KAArD,CAA0D,CAAC,QAA3D,CAAoE,QAApE,EAF4C;EAAA,CAA9C,CA3CA;AAAA,EA+CA,EAAE,MAAF,CAAS,CAAC,EAAV,CAAa,OAAb,EAAqB,cAArB,EAAoC,SAAC,CAAD;AAClC;AAAA,KAAC,CAAC,cAAF;AAAA,IACA,SAAS,EAAE,EAAE,IAAF,CAAI,CAAC,IAAL,CAAU,MAAV,CAAF,CADT;WAEA,EAAE,WAAF,CAAc,CAAC,OAAf,CAAuB;AAAA,MAAC,WAAW,MAAM,CAAC,MAAP,EAAe,CAAC,GAA5B;KAAvB,EAAyD,GAAzD,EAHkC;EAAA,CAApC,CA/CA;SAoDA,EAAE,MAAF,CAAS,CAAC,EAAV,CAAa,OAAb,EAAqB,YAArB,EAAkC,SAAC,CAAD;WAChC,EAAE,IAAF,CAAI,CAAC,IAAL,CAAU,GAAV,CAAc,CAAC,KAAf,GADgC;EAAA,CAAlC,EAtDgB;AAAA,CAAlB,CAFA","sourcesContent":["class ScrollSpy\n  inscroll: false\n  currentPosition:\n    top: 0\n    view: 0\n    bottom: 0\n  prevPosition:\n    top: 0\n    view: 0\n    bottom: 0\n  sections: []\n  nav: null\n  currentSection: {}\n  prevSection: {}\n  direction: null\n  actions: null\n\n  constructor: (sections) ->\n    setTimeout ()=>\n      @checkBlockOffset(sections)\n      @checkPosition()\n    , 400\n  checkBlockOffset: (sections)->\n    _this = this\n    sections.each (key, e) ->\n      _this.sections[key] =\n        id: $(@).attr 'id'\n        offset: $(@).offset()\n        height: $(@).outerHeight(true)\n        elem:   $(@)\n    console.log @sections\n\n  checkPosition: ->\n    @prevPosition =           _(@currentPosition).clone()\n    @currentPosition.top    = $(window).scrollTop()\n    @currentPosition.view   = $(window).scrollTop() + $(window).outerHeight(true) / 2\n    @currentPosition.bottom = $(window).scrollTop() + $(window).outerHeight(true)\n\n    @direction = if @currentPosition.top > @prevPosition.top then \"down\" else \"up\"\n    @getCurrentSection()\n\n  getCurrentSection: ->\n    @prevSection = _(@currentSection).clone()\n    key = 0;\n    for section in @sections\n      if @currentPosition.top >= @sections[key].offset.top\n        if @sections[key+1]? and @currentPosition.view <= @sections[key+1].offset.top\n          @currentSection = @sections[key]\n        else\n          @currentSection = @sections[key+1]\n      key++;\n    @makeActions()\n\n  makeActions: ()->\n    if @nav isnt null\n      console.log 'change active in navbar'\n    if @currentSection.id isnt @prevSection.id and @actions isnt null\n      for id,callback of @actions\n        if id is @currentSection.id or id is 'ALL' then callback(@currentSection.elem)\n\n  addAction: (id,callback)->\n    if @actions is null then @actions = {}\n    @actions[\"#{id}\"] = callback\n\n  disableUserScroll: ->\n    @inscroll = true\n    document.onmousewheel = (e) ->\n      e.preventDefault()\n\n  enableUserScroll: ->\n    @inscroll = false\n    document.onmousewheel = (e) ->\n\n$.fn.scrollSpy = (nav = null)->\n  scrollSpy = new ScrollSpy($(@))\n  $(window).scroll ()->\n    scrollSpy.checkPosition()\n  return scrollSpy","require './coffee_modules/scrollSpy'\n\n$(document).ready ()->\n\n  $('body').on 'click','.activate_this',(e)->\n    e.preventDefault()\n    trigger = $(@)\n    target  = $(trigger.data('activate-target'))\n    if trigger.hasClass('active')\n      trigger.removeClass 'active'\n      target.removeClass 'active'\n    else\n      trigger.addClass 'active'\n      target.addClass 'active'\n\n  #####  push slider #####\n  prepare_slider = (slider)->\n    slides = $(slider).find('.push-slide')\n    slides_count = slides.length\n\n    slides.each (key,val)->\n      offset = 5 * key\n      $(@).css(\"-webkit-transform\", \"translate3d(-#{offset}px,-#{offset}px,0)\")\n      $(@).css(\"-moz-transform\", \"translate3d(-#{offset}px,-#{offset}px,0)\")\n      $(@).css(\"-o-transform\", \"translate3d(-#{offset}px,-#{offset}px,0)\")\n      $(@).css(\"transform\", \"translate3d(-#{offset}px,-#{offset}px,0)\")\n      $(@).css(\"display\", \"block\")\n      $(@).removeClass 'active'\n      $(@).addClass 'active' unless ((key+1) != slides_count)\n\n\n  $('.push-slider').each ()->\n    prepare_slider(@)\n\n  $('body').on 'click','.push-slider',(e)->\n    e.preventDefault()\n    active_slide = $(@).find '.push-slide.active'\n    next_slide   = active_slide.prev()\n    console.log next_slide\n    if next_slide.length > 0\n      active_slide.removeClass 'active'\n      active_slide.css 'display','none'\n      next_slide.addClass 'active'\n    else\n      prepare_slider(@)\n\n\n  $('section.work').scrollSpy().addAction 'ALL',(elem)->\n    $(\".menu-item\").removeClass 'active'\n    $(\".menu-item[data-scroll-target=\\\"#{elem.attr('id')}\\\"]\").addClass 'active'\n\n  $('body').on 'click','.menu-item a',(e)->\n    e.preventDefault()\n    target = $($(@).attr('href'))\n    $('body,html').animate {scrollTop: target.offset().top}, 600\n\n  $('body').on 'click','.menu-item',(e)->\n    $(@).find('a').click()"]}