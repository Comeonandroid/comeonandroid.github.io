{"version":3,"file":"public/javascripts/app.js","sources":["app/initialize.coffee"],"names":[],"mappings":"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","sourcesContent":["\nhtmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '/': '&#x2F;'\n};\n\nhtmlEscaper = /[&<>\"'\\/]/g\n\n_.escape = (string) ->\n  return ('' + string).replace(htmlEscaper, (match) ->\n    return htmlEscapes[match];\n)\n\n\n\npageId = 0\n\nmonthText = ['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря']\n\ngetCookie = (name)->\n  matches = document.cookie.match(new RegExp(\n    \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n  ))\n  if matches then return decodeURIComponent(matches[1]) else return undefined\n\nshowBullshits = (container,data) ->\n  for key,value of data\n    date    = new Date(value.date)\n    year    = date.getFullYear()\n    month   = monthText[date.getMonth()]\n    day     = date.getDate()\n    hours   = date.getHours()\n    minutes = date.getMinutes()\n\n    dateFormat = day + ' ' + month + ' ' + year + ' / ' + hours + ':' + minutes\n    url = window.location.origin + \"/bullshit/\" + value._id\n\n    society = \"<a href=\\\"http://vkontakte.ru/share.php?url=#{url}&title=Bullshit Board\\\" target=\\\"_blank\\\">Вконтакте</a> / <a target=\\\"_blank\\\" href=\\\"http://www.facebook.com/sharer/sharer.php?u=#{url}\\\">Фейсбук</a> / <a href=\\\"https://twitter.com/intent/tweet?text=Bullshit Board. #{_.escape(value.text)}&url=#{url}\\\" rel=\\\"nofollow\\\" target=\\\"_blank\\\">Твиттер</a>\"\n\n    if getCookie('admin') is 'IDKFA'\n      society += \" / <span class='wow_del_bullshit' data-id='#{value._id}'>Участковому</span>\"\n\n    rotate = Math.random() * (0.3 - (-0.3)) + -0.3\n\n    container.append(\"<div class='bullshit' style='transform: rotate(#{rotate}deg); -webkit-transform: rotate(#{rotate}deg);-moz-transform: rotate(#{rotate}deg);-o-transform: rotate(#{rotate}deg);-ms-transform: rotate(#{rotate}deg) ;'><div class='such_bullshit_message'>#{value.text}</div><div class='many_footer'>[ #{dateFormat} ] рассказать об этом: #{society}</div></div>\")\n\n\n\n$.get \"/bullshits/#{pageId}\", (data)->\n  showBullshits($('.very_bullshit_container'),data)\n\n\n\n\n$('body').on 'keyup','.very_search_input', ()->\n  $(@).height($(@).height() + $(@).scrollTop())\n  if $(@).val().length > 2\n    text = $(@).val()\n    $.get \"/bullshits/search/#{text}\", (data)->\n      if(data.length > 0)\n        $('.very_bullshit_search_container').html('')\n        showBullshits($('.very_bullshit_search_container'),data)\n        $('.so_sorry').hide()\n      else\n        $('.very_bullshit_search_container').html('')\n        $('.so_sorry').show()\n  else\n    $('.very_bullshit_search_container').html('')\n    $('.so_sorry').hide()\n\n$('body').on 'click','.wow_show_about', (e)->\n  e.preventDefault();\n  $(@).css 'opacity',0\n  $('.about').css {left:'0px',overflow:'visible'}\n  $('.main').css 'left','320px'\n\n$('body').on 'click','.wow_hide_about', (e)->\n  e.preventDefault();\n  $('.wow_show_about').css 'opacity',1\n  $('.about').css {left:'-320px',overflow:'hidden'}\n  $('.main').css 'left','0px'\n\n$('body').on 'click','.wow_show_search', (e)->\n  e.preventDefault();\n  $('.wow_wrapper.search').fadeIn(600)\n  $('.wow_wrapper.main').fadeOut(500)\n  $('.wow_wrapper.main div').fadeOut(500)\n  $(\".wow_wrapper.search div[class != 'so_sorry']\").fadeIn(600)\n  $('textarea').focus()\n  $('.very_bullshit_search_container').html('')\n\n\n$('body').on 'click','.wow_hide_search', (e)->\n  e.preventDefault();\n  $('.wow_wrapper.search').fadeOut(600)\n  $('.wow_wrapper.main').fadeIn(600)\n  $('.wow_wrapper.main div').fadeIn(600)\n  $('.wow_wrapper.search div').fadeOut(600)\n\n$('body').on 'click','.wow_publish', (e)->\n  e.preventDefault()\n\n  input = $(this).parent().find('.very_search_input')\n  input.css 'text-transform', 'none'\n  text = input.val()\n  input.css 'text-transform', 'uppercase'\n\n  $.post '/bullshit',{text: text}, (data)->\n    if data.status is 'success'\n      $('.very_bullshit_container').html('')\n      pageId = 0\n      $.get \"/bullshits/#{pageId}\", (data)->\n        $('.very_bullshit_container').html('')\n        showBullshits($('.very_bullshit_container'),data)\n      input.val('');\n      $('.wow_wrapper.search').fadeOut(600)\n      $('.wow_wrapper.main').fadeIn(600)\n      $('.wow_wrapper.main div').fadeIn(600)\n      $('.wow_wrapper.search div').fadeOut(600)\n\n$('body').on 'click','.wow_del_bullshit', (e)->\n  id = $(@).attr('data-id')\n  bullshit = $(@).parents('.bullshit')\n  $.ajax({\n    url: \"/bullshit/#{id}\",\n    type: 'DELETE',\n    success: (result) ->\n      bullshit.remove()\n  })\n\n$(document).scroll (e)->\n  if $(window).height() + $(window).scrollTop() > $(document).height() - 300\n    pageId++\n    console.log pageId\n    $.get \"/bullshits/#{pageId}\", (data)->\n      showBullshits($('.very_bullshit_container'),data)\n\ndate    = new Date()\nyear    = date.getFullYear()\nmonth   = monthText[date.getMonth()]\nday     = date.getDate()\nhours   = date.getHours()\nminutes = date.getMinutes()\n\ndateFormat = day + ' ' + month + ' ' + year + ' / ' + hours + ':' + minutes\n\n$('.very_date').text(dateFormat)\n\n\nif bullshit?\n  value = bullshit\n\n  date    = new Date(value.date)\n  year    = date.getFullYear()\n  month   = monthText[date.getMonth()]\n  day     = date.getDate()\n  hours   = date.getHours()\n  minutes = date.getMinutes()\n\n  dateFormat = day + ' ' + month + ' ' + year + ' / ' + hours + ':' + minutes\n\n  url = window.location.origin + \"/bullshit/\" + value._id\n\n  society = \"<a href=\\\"http://vkontakte.ru/share.php?url=#{url}&title=Bullshit Board\\\" target=\\\"_blank\\\">Вконтакте</a> / <a target=\\\"_blank\\\" href=\\\"http://www.facebook.com/sharer/sharer.php?u=#{url}\\\">Фейсбук</a> / <a href=\\\"https://twitter.com/intent/tweet?text=Bullshit Board. #{_.escape(value.text)}&url=#{url}\\\" rel=\\\"nofollow\\\" target=\\\"_blank\\\">Твиттер</a>\"\n\n\n  $('.very_bullshit_search_container').append(\"<div class='bullshit'><div class='such_bullshit_message'>#{value.text}</div><div class='many_footer'>[ #{dateFormat} ] рассказать об этом: #{society}</div></div>\")\n\n"]}